<style>

    #__0__ .code {
        font-size: 1.2em;
    }

    #__0__ .code pre {
        background-color: white;
    }

    #__0__ .line-highlight {
        border: solid black 2px;
    }

</style>

<div class="title"></div>
<div class="code"></div>

<script>

    (function () {
        _0.glowText(".title", ["Step 4: Start transaction",], "small glow");

        const codeSelector = ".code";

        _0.codeJs(codeSelector,
            "...\n" +
            "import {hashSHA256FromUtf8} from './hash';\n" +
            "...\n" +
            "export class HashStore extends React.Component {\n" +
            "...\n" +
            "    async storeHashedText() {\n" +
            "        const contract = this.drizzle.contracts.HashStore;\n" +
            "        const hashedText = await hashSHA256FromUtf8(this.text);\n" +
            "\n" +
            "        const txKey = contract.methods[\"storeHash\"].cacheSend(hashedText, {\n" +
            "            from: this.state.drizzleState.accounts[0]\n" +
            "        });\n" +
            "\n" +
            "        this.setState({txKey, hashedText});\n" +
            "    };\n" +
            "...\n" +
            "}\n"
        );

        const steps = [];
        steps.push(_0.highlightLinesStep(codeSelector, "2", "Just to create the hash value"));
        steps.push(_0.highlightLinesStep(codeSelector, "6-15", "Call the contract method 'storeHash'", "top"));
        steps.push(_0.highlightLinesStep(codeSelector, "7", "Use the Drizzle thingy to get a contract proxy "));
        steps.push(_0.highlightLinesStep(codeSelector, "8", "Get the hash value"));
        steps.push(_0.highlightLinesStep(codeSelector, "10-12", "Call the transactional contract method and get a key as return", "top"));
        steps.push(_0.highlightLinesStep(codeSelector, "14", "Put the key and the hash value into the component state"));

        _0.setSteps(steps);

        ___();
    })()
</script>